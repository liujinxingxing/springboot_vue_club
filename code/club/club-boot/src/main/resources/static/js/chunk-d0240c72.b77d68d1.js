(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d0240c72"],{1795:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.error?s("div",{staticClass:"feelback-error",class:{"feelback-error-shadow":e.max}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.max,expression:"!max"}],staticClass:"fr",attrs:{type:"danger"},on:{click:function(t){return e.showMax()}}},[e._v("反馈内容")]),s("transition",{attrs:{name:"el-fade-in"},on:{enter:e.goIn}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.max,expression:"max"}],staticClass:"feelback-error-info"},[s("div",{staticClass:"feelback-error-info-header"},[s("span",[e._v("文档错误反馈")]),s("el-button",{staticClass:"fr",attrs:{type:"danger"},on:{click:function(t){return e.showMax()}}},[e._v("收起内容")])],1),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadFeelbackProgress,expression:"loadFeelbackProgress"}],staticClass:"feelback-error-info-body",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"30"}},[s("p",{staticClass:"info-desc"},[e._v(e._s(e.feelback.description))]),s("div",{staticClass:"info-node"},[s("el-timeline",{attrs:{reverse:e.reverse}},[e.base?s("el-timeline-item",{attrs:{type:e.base[0].type,color:e.base[0].color,size:e.base[0].size,icon:e.base[0].icon,timestamp:e.base[0].timestamp}},[e._v(e._s(e.base[0].content))]):e._e(),e._l(e.activities,(function(t,a){return s("el-timeline-item",{key:a,attrs:{type:t.type,color:t.color,size:t.size,icon:t.icon,timestamp:t.timestamp}},[e._v(e._s(t.content))])})),e.base?s("el-timeline-item",{attrs:{type:e.base[1].type,color:e.base[1].color,size:e.base[1].size,icon:e.base[1].icon,timestamp:e.base[1].timestamp}},[e._v(e._s(e.base[1].content))]):e._e()],2)],1),"4"==e.feelback.status||e.feelback.result?e._e():s("el-form",{ref:"reform",attrs:{model:e.mod,rules:e.formRules}},[s("el-form-item",{attrs:{prop:"description"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"400",rows:6,"show-word-limit":""},model:{value:e.mod.description,callback:function(t){e.$set(e.mod,"description",t)},expression:"mod.description"}})],1),s("el-form-item",{attrs:{prop:"status"}},[s("el-radio",{attrs:{label:"1"},model:{value:e.mod.status,callback:function(t){e.$set(e.mod,"status",t)},expression:"mod.status"}},[e._v("参数错误")]),s("el-radio",{attrs:{label:"2"},model:{value:e.mod.status,callback:function(t){e.$set(e.mod,"status",t)},expression:"mod.status"}},[e._v("路径错误")]),s("el-radio",{attrs:{label:"3"},model:{value:e.mod.status,callback:function(t){e.$set(e.mod,"status",t)},expression:"mod.status"}},[e._v("操作错误")]),s("el-radio",{attrs:{label:"4"},model:{value:e.mod.status,callback:function(t){e.$set(e.mod,"status",t)},expression:"mod.status"}},[e._v("其他错误")]),s("el-switch",{attrs:{width:36,"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"成功解决","inactive-text":"未解决"},model:{value:e.mod.result,callback:function(t){e.$set(e.mod,"result",t)},expression:"mod.result"}}),s("el-button",{staticClass:"fr",attrs:{type:"primary",disabled:e.btnState},on:{click:e.saveData}},[e._v("提交")])],1)],1)],1)])])],1):e._e()},i=[],o=s("ade3"),r=(s("a4d3"),s("e01a"),s("0d03"),s("2226")),n=s("4328"),l=s.n(n),c=Object(o["a"])({name:"feelback-error",components:{},data:function(){return{max:!1,loading:!1,noMore:!1,page:1,isPage:!1,btnState:!1,mod:{description:"",status:"1",result:!1},feelback:{feelbackId:"",description:"",status:"0",result:null},reverse:!1,base:null,activities:[],formRules:{description:[{required:!0,message:"请输入描述内容",trigger:"blur"},{min:1,max:300,message:"长度为 1 到 300 个字符",trigger:"blur"}]}}},props:{error:{type:Boolean,default:function(){return!1}},feelbackId:{type:String,default:function(){return""}}},watch:{feelbackId:function(e,t){console.log(e,"dsdjkjjjdjfdjffhjfkdfjhjdfhkhdkfjghkdjf"),this.base=null,this.activities=[],this.goIn()}},computed:{},created:function(){},methods:{saveData:function(){var e=this;this.$refs.reform.validate((function(t){if(!t)return!1;e.submit()}))},submit:function(){var e=this;this.btnState=!0,this.mod.feelbackId=this.feelback.feelbackId,this.$fetch(r["a"].back.progress.save,this.mod,{headers:{"Content-Type":"application/json"}}).then((function(t){e.btnState=!1,t&&t.success?(t.data.result&&(e.feelback.result=t.data.result),e.mod.description="",e.activities.push({content:t.data.description,timestamp:t.data.updateTime,size:"large",type:"info"})):e.$message({type:"error",message:t.message})}))},showMax:function(){this.max=!this.max},goIn:function(){var e=this;console.log(this.feelbackId,"dsdjkjjjdjfdjffhjfkdfjhjdfhkhdkfjghkdjf"),""!=this.feelbackId&&(this.page=1,this.$fetch(r["a"].back.get,l.a.stringify({feelbackId:this.feelbackId},{arrayFormat:"repeat"}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){t&&t.success?(e.feelback=t.data,e.base=[{content:"开始创建",timestamp:t.data.createTime,size:"large",type:"info",icon:"el-icon-star-off"},{content:"当前处理流程",timestamp:e.datetimeFormat(new Date,"yyyy-MM-dd hh:mm:ss"),size:"large",type:"primary",icon:"el-icon-help"}],e.isPage||e.loadFeelbackProgress()):e.msg(t)})))},loadFeelbackProgress:function(){var e=this;""!=this.feelback&&(this.noMore||(this.loading=!0,this.$fetch(r["a"].back.progress.list,l.a.stringify({page:this.page,size:10,isPage:this.isPage,roll:!0,feelbackId:this.feelback.feelbackId},{arrayFormat:"repeat"})).then((function(t){if(e.loading=!1,t&&t.success){for(var s=0;s<t.data.length;s++)e.activities.push({content:t.data[s].description,timestamp:t.data[s].updateTime,size:"large",type:"info"});return t.next&&(e.page+=1),void(e.noMore=!t.next||!1)}e.noMore=!0,e.$message.error(t.message)}))["catch"]((function(t){e.noMore=!0,console.log(t)}))))}}},"watch",{}),d=c,f=(s("b340"),s("2877")),m=Object(f["a"])(d,a,i,!1,null,null,null);t["default"]=m.exports},b274:function(e,t,s){},b340:function(e,t,s){"use strict";s("b274")}}]);